(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(0),o=t(2),r=t(15),s=t.n(r),i=(t(21),t(6)),u=t(3),a=function(e){var n=e.person;return Object(c.jsx)("div",{children:Object(c.jsx)("button",{onClick:function(){return t=n.id,console.log("id is: ",t),void(window.confirm("Do you really want to delete ".concat(n.name," ?"))&&e.deleteItem(t));var t},children:"delete"})})},l=function(e){var n=e.persons,t=e.filterName,o=e.setFilterName,r=n.filter((function(e){return e.name.toLocaleLowerCase().includes(t)})),s=t?r:n;return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Search"}),Object(c.jsx)("form",{}),Object(c.jsxs)("div",{children:[Object(c.jsx)("input",{value:t,onChange:function(e){return o(e.target.value.toLocaleLowerCase())}}),Object(c.jsx)("hr",{}),!r.length&&Object(c.jsx)("div",{children:"No name matches that criteria"}),s.map((function(t){return Object(c.jsxs)("div",{children:[Object(c.jsxs)("p",{children:[t.name," ",t.number]}),Object(c.jsx)(a,{person:t,persons:n,deleteItem:e.deleteItem})]},t.id)}))]})]})},d=function(e,n,t){var c=e[0],o=n,r=t;return console.log("duplicate person is: ",c),console.log("personObj is: ",o),void(window.confirm("".concat(c.name," is already in the phonebook, replace the old number? ?"))&&r(c.id,o))},j=function(e){var n=e.persons,t=e.newName,o=e.setNewName,r=e.newNumber,s=e.setNewNumber;return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsxs)("form",{onSubmit:function(c){c.preventDefault(),console.log("button clicked",c.target);var o={name:t,number:r},s=function(e){return e.name===o.name},i=n.filter(s);!0===n.some(s)?(window.alert(o.name+"  already exists!"),console.log("The dupe person is: ",o.name),d(i,o,e.updateItem)):e.addItem(o)},children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:t,onChange:function(e){console.log(e.target.value),o(e.target.value)}})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:r,onChange:function(e){console.log(e.target.value),s(e.target.value)}})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("button",{type:"submit",children:"add"}),console.log(n)]})]})]})},f=function(e){var n=e.message;return null===n?null:Object(c.jsxs)(c.Fragment,{children:[n.includes("successfully")&&Object(c.jsx)("div",{className:"success",children:n}),n.includes("error")&&Object(c.jsx)("div",{className:"error",children:n})]})},b=t(4),m=t.n(b),h="api/persons",O=function(){return m.a.get(h).then((function(e){return e.data}))},p=function(e){return m.a.post(h,e).then((function(e){return e.data}))},v=function(e,n){return m.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},g=function(e){return m.a.delete("".concat(h,"/").concat(e))},x=function(){var e=Object(o.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],s=Object(o.useState)(""),a=Object(u.a)(s,2),d=a[0],b=a[1],m=Object(o.useState)(""),h=Object(u.a)(m,2),x=h[0],w=h[1],N=Object(o.useState)(""),y=Object(u.a)(N,2),I=y[0],k=y[1],S=Object(o.useState)(null),T=Object(u.a)(S,2),C=T[0],L=T[1];Object(o.useEffect)((function(){O().then((function(e){console.log("initialPersons is: ",e),r(e)}))}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)(l,{filterName:I,setFilterName:k,persons:t,deleteItem:function(e){g(e).then((function(){r(t.filter((function(n){return n.id!==e}))),L("Removed successfully"),setTimeout((function(){L(null)}),5e3)})).catch((function(n){L("error"),setTimeout((function(){L(null)}),5e3),r(t.filter((function(n){return n.id!==e})))}))}}),Object(c.jsx)(f,{message:C}),Object(c.jsx)(j,{persons:t,setPersons:r,newName:d,setNewName:b,newNumber:x,setNewNumber:w,addItem:function(e){p(e).then((function(e){r(t.concat(e)),L("".concat(e.name," was added successfully")),setTimeout((function(){L(null)}),5e3)})).catch((function(n){L("error"),setTimeout((function(){L(null)}),5e3),r(t.filter((function(n){return n.id!==e.id})))}))},updateItem:function(e,n){var c=t.find((function(n){return n.id===e})),o=Object(i.a)(Object(i.a)({},c),{},{number:n.number});console.log("Person find is: ",c),console.log("changed person is: ",o),console.log("current persons: ",t),v(e,o).then((function(n){r(t.map((function(t){return t.id!==e?t:n}))),L("".concat(n.name," was updated successfully")),setTimeout((function(){L(null)}),5e3),console.log("returned person is:",n)})).catch((function(n){L("error"),setTimeout((function(){L(null)}),5e3),r(t.filter((function(n){return n.id!==e})))})),console.log(t)},errorMessage:C})]})};s.a.render(Object(c.jsx)(x,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.14996280.chunk.js.map